<!DOCTYPE html>

<head>
<title>Haulers Channel - Base Rate Calculator</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="style-ogb.css">
<script src="utils.js"></script>
<script src="reward_calculator.js"></script>
<script>
	function AllCalc() {
		var volume = parseFloat($( '#volume').val().replace(/[^\d\.\-\ ]/g, ''));
		var jumps = parseInt($('#jumps').val().replace(/[^\d\.\-\ ]/g, ''));
		var collat = parseFloat($('#collateral').val().replace(/[^\d\.\-\ ]/g, ''));
		var type = $('#type_ipj').prop('checked')?'L':'H';
		var is_rush = $('#type_ipj').prop('checked')?true:false;
		var reward = CalcReward(volume, jumps, collat, type, is_rush);
		validateCollateral(volume, collat);
		if (!reward){return;}
		var ipj = reward / parseInt($('#jumps').val().replace(/[^\d\.\-\ ]/g, ''));

		$('#reward_label').addClass('active');
		$('#reward_ipj_label').addClass('active');
		if (reward > 0) {
			$('#reward').val(numberWithCommas(reward.toFixed(2).toString()));

			ipj = ipj.toFixed(2).toString();
			$('#reward_ipj').val(numberWithCommas(ipj));

			$( '#reward').css({color:"green"});
		}
		else {
			$( '#reward').css({color:"red"});
			$('#reward').val( reward);
		}
	}
	function NumFormat(value){
		return value.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	}
	function numberWithCommas(x) {
		return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	}
	function validateCollateral(volume, collat) {
		if (collat > 2e9 && volume > 60e3){
			$('#collateral').css( {"color":"red"});
		}
		else {
			$('#collateral').css( {"color":"white"});
		}
	}
	$(document).ready(function(){
		$('input.to_format_number').blur(function(event) {
			if(event.which >= 37 && event.which <= 40) return;
			$(this).val(function(index, value) {
				return NumFormat( value);
			});
		});
		$('.to_change').on( 'change paste keyup', AllCalc);
	});
</script>
<style>
.input-field label,label{color:#EEEEEE}
.volume-btn{
	margin:1px 5%;width:90%;font-size:0.8em;height:2.5em;line-height:2.5em;padding:0.2em 0.2em;
}
/* Palette generated by Material Mixer - https://www.sankk.in/material-mixer/ */ 
.dark-primary-color    { background: #000000; } 
.default-primary-color { background: #212121; } 
.light-primary-color   { background: #9E9E9E; } 
.accent-color          { background: #2962FF; } 
.accent-light          { background: #2979FF; } 
.accent-tint           { background: #5481FF; } 

body{}
input{border-color:#5481FF !important}
label.checkbox-label:after{border-color:#5481FF !important}

</style>
</head>
<body class="default-primary-color ">
  <div class="container">
        <div class="row">
          <!-- Header -->
          <div class="header col s12">
            <h1 class="center-align title" style="color: #EEEEEE; font-size: 8em">Haulers Channel</h1>
            <h4 class="center-align title" style="margin-top: -20px; margin-bottom: 60px; font-size: 3.5em; color:#5481FF">Base Rate Calculator</h4>
          </div>
          <!--<hr>-->
          <!-- Input Area -->
          <div class="col s12 input_area" style="margin-left: 15px;color:#EEEEEE;">
            <div class="row">
              <!-- Left Side -->
              <div class="col s3 offset-s1" style=";margin-top:15px">
                <form class="col s12">
                  <div class="row">
                    <div class="input-field col s12">
                      <input id="collateral" type="text" value=""class="to_format_number to_change">
                      <label id="collateral_label" for="collateral">Collateral</label>
                    </div>
                    <div class="input-field col s12">
                      <input id="jumps" type="text" value="" class="to_format_number to_change">
                      <label id="jumps_label" for="jumps"># of Jumps</label>
                    </div>
                  </div>
                </form>
              </div>
              <!-- Right Side -->
              <div class="col s4" style="margin-left: -21px;margin-top:15px">
                  <!-- Output Area -->
                  <div class="col s12">
                    <div class="row bottom_area">
                      <!-- Bottom Area -->
                      <div class="input-field col s12">
                        <input value=""id="volume" type="text" class="to_format_number to_change">
                        <label id="volume_label" for="volume">Volume</label>
					<!--	<button class="btn accent-tint volume-btn" onclick="$( '#volume').val( '600,000');$( '#volume').focus();AllCalc()">Freighter</button>
						<button class="btn accent-tint volume-btn" onclick="$( '#volume').val( '60,000');$( '#volume').focus();AllCalc()">Deep Space Transport</button>
						<button class="btn accent-tint volume-btn" onclick="$( '#volume').val( '12,000');$( '#volume').focus();AllCalc()">Blockade Runner</button>
-->
                      </div>
                      <div class="input-field col s12">
                      </div>
                    </div>
                  </div>
              </div>
              <!-- Center -->
              <div class="col s3" style="margin-left: -21px;">
                  <!-- Output Area -->
                  <div class="col s12 output_area">
                    <div class="row bottom_area">
                      <!-- Bottom Area -->
                      <div class="input-field col s12">
                        <input style="color: green;" id="reward" type="text" class="" onfocus="select()">
                        <label id="reward_label" for="reward">Reward</label>
                      </div>
						  <p class="left-align" style="margin-left: 10px">
							<input type="checkbox" class="filled-in to_change" value="L" id="type_ipj"/>
							<label for="type_ipj"class="checkbox-label">Low/Nullsec</label>
						  </p>
                    <p class="left-align" style="margin-left: 10px">
                      <input type="checkbox" class="filled-in to_change" value="1" id="rush"/>
                      <label for="rush" class="checkbox-label">Rush Delivery &nbsp;&nbsp;</label>
                    </p>
                    </div>
                  </div>
              </div>
            </div>
          </div>
          <!-- Footer -->
          <div class="disclaimer_footer" style="color:#EEEEEE;line-height:2em">
            <p class="center-align"><span style="color: yellow">Disclaimer: </span>The Final Price is entirely up to yourself.<br>
            This calculator assumes the contract starts and ends near a hub.<br>
           This calculator is intended for people new to courier contracts, anything under</br>
            these values will normally move slower than normal., and possibly not at all.</br>
            <strong>Note: <i>The more you pay </i> = the less you wait.</strong></p>
          </div>
        </div>
      </div>
</body>
