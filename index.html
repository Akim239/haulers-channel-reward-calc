<!DOCTYPE html>

<head>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.5/clipboard.min.js"></script>
  <script>
    $(document).ready(function(){

      new Clipboard('i');
      new Clipboard('p');

      $('html').click(function() {
        // Reward Rates by Rita Jita, site made by Rashad Charante
        var collateral = $('#collateral').val();
        var jumps = $('#jumps').val();
        var m3 = $('#m3').val();
        var reward = 0;
        var base_rate = 0;
        // Shamelessly ripped from stack overflow
        function numberWithCommas(x) {
          return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Base Rate (Per Jump)
        if (m3 <= 12500) {
          base_rate = 250000;
        } else if (m3 <= 60000) {
          base_rate = 500000;
        } else {
          base_rate = 1000000;
        }


        // Reward

          reward = base_rate * jumps * Math.ceil(collateral / 1000000000);

        // Extra Fees
        

        if ($('#rush').prop('checked')) {
          reward = reward * 2;
        }

        if ($('#lowsec').prop('checked')) {
          reward = reward * 2;
        }
        
        // updates prices displayed in text
        if (reward > 0) {
          $('#normal_reward').text(numberWithCommas(reward) + " ISK");
          $('#normal_reward_ipj').text(numberWithCommas(reward / jumps) + " ISK");
        }
      });
    });
  </script>
</head>
<body class="grey darken-4">
  <div class="container">
    <div class="row">
      <div class="round_box grey darken-3 col s12" style="margin-top: 30px;">
        <div class="row">
          <!-- Header -->
          <div class="header col s12">
            <h1 class="blue-text darken-4 center-align">Haulers Channel</h1>
            <h1 class="blue-text darken-4 center-align">Base Rate Calculator</h1>
          </div>
          <hr>
          <!-- Input Area -->
          <div class="col s12 input_area">
            <div class="row">
              <!-- Left Side -->
              <div class="col s6">
                <form class="col s12">
                  <div class="row">
                    <div class="input-field col s12">
                      <input id="m3" type="text" class="validate">
                      <label for="m3">Volume (m3)</label>
                    </div>
                    <div class="input-field col s12">
                      <input id="collateral" type="text" class="validate">
                      <label for="collateral">Collateral</label>
                    </div>
                    <div class="input-field col s12">
                      <input id="jumps" type="text" class="validate">
                      <label for="jumps"># of Jumps</label>
                    </div>
                  </div>
                </form>
              </div>
              <!-- Right Side -->
              <div class="col s6">
                  <form action="#">
                    <p>
                      <input type="checkbox" class="filled-in" id="rush"/>
                      <label for="rush">Rush Delivery (2x Reward)</label>
                    </p>
                    <p>
                      <input type="checkbox" class="filled-in" id="lowsec"/>
                      <label for="lowsec">Lowsec (2x Reward)</label>
                    </p>
                  </form>
              </div>
            </div>
          </div>
          <hr>
          <!-- Output Area -->
          <div class="col s12">
            <div class="row">
              <!-- Bottom Area -->
              <div class="col s12">
                <h2 class="center-align" style="color: #FFFFFF">Reward</h1>
                <h4 class="center-align" id="normal_reward" style="color: #FFFFFF"></h3>
                <p class="center-align" data-clipboard-target="#normal_reward">
                  Copy To Clipboard
                </p>
                <h2 class="center-align" style="color: #FFFFFF">Isk Per Jump</h1>
                <h4 class="center-align" id="normal_reward_ipj" style="color: #FFFFFF"></h3>
              </div>
            </div>
          </div>
          <!-- Footer -->
          <hr>
          <p class="center-align" style="color: #FFFFFF">Disclaimer: This is a Base Rate Calculator intended for use by people new to creating courier contracts, this means that this is the base mininum reward.</p>
        </div>
      </div>
    </div>
  </div>
</body>
